(this["webpackJsonpmce-promotion-inspector"]=this["webpackJsonpmce-promotion-inspector"]||[]).push([[0],{11:function(t,e,a){t.exports=a(28)},16:function(t,e,a){},22:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},23:function(t,e,a){},28:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a.n(s),n=a(8),i=a.n(n),o=(a(16),a(9));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},9:function(t,e,a){"use strict";(function(t){var s=a(3),r=a(4),n=a(6),i=a(5),o=a(0),p=a.n(o),c=(a(22),a(23),a(1)),l=a.n(c),m=(a(25),a(10)),h="https://www.monopolycasino.es";l()().locale("es");var d=function(e){Object(n.a)(o,e);var a=Object(i.a)(o);function o(t){var e;return Object(s.a)(this,o),(e=a.call(this,t)).state={config:{settings:{env:{}}},jira:{fields:{},key:null}},e}return Object(r.a)(o,[{key:"componentDidMount",value:function(){var t=this,e=h+this.props.promo.url.replace("index.html","");fetch(e+"config.json").then((function(t){return t.json()})).then((function(e){t.setState({config:e})}))}},{key:"componentDidUpdate",value:function(e,a){var s=this;if(e.username!=this.props.username||e.password!=this.props.password){var r=new Headers;r.set("Authorization","Basic "+t.from(this.props.username+":"+this.props.password).toString("base64")),fetch('https://jira.gamesys.co.uk/rest/api/latest/search?jql="Path (URL) of the promotion" ~ '+this.props.promo.path,{method:"GET",headers:r}).then((function(t){return t.json()})).then((function(t){t&&t.issues&&t.issues[0]&&s.setState({jira:t.issues.find((function(t){return t.fields.customfield_12471&&t.fields.customfield_12471.trim()==s.props.promo.path.trim()}))})}))}}},{key:"render",value:function(){return p.a.createElement("tr",{className:0==this.props.index&&0!=this.props.index2?"primeraMes":""},0==this.props.index?p.a.createElement("td",{className:"tdMonthName",style:{"vertical-align":"middle"},rowSpan:this.props.mes.promos.length}," ",p.a.createElement("span",null,l()(this.state.config.settings.startDate,"DD/MM/YYYY").format("MMM YY"))," "):null,p.a.createElement("td",null,p.a.createElement(m.a,null),p.a.createElement("a",{target:"_blank",href:"https://jira.gamesys.co.uk/browse/"+this.state.jira.key},this.state.jira.key)),p.a.createElement("td",null,this.state.jira.fields&&this.state.jira.key?l()(this.state.jira.fields.customfield_12274,"YYYY-MM-DD").isSame(l()(this.props.promo.startDate,"DD/MM/YYYY"))?p.a.createElement("span",{"data-tip":"Fecha Inicio Jira correcta: "+this.state.jira.fields.customfield_12274},"\u2705"):p.a.createElement("span",{"data-tip":"\u274c Fecha inicio en jira: "+this.state.jira.fields.customfield_12274},"\u274c"):p.a.createElement("span",{"data-tip":"Fecha Inicio"},"\u2753"),this.state.jira.fields&&this.state.jira.key?l()(this.state.jira.fields.customfield_12470,"YYYY-MM-DD").isSame(l()(this.props.promo.expiryDate,"DD/MM/YYYY").subtract(1,"days"))?p.a.createElement("span",{"data-tip":"Fecha Fin Jira correcta: "+this.state.jira.fields.customfield_12470},"\u2705"):p.a.createElement("span",{"data-tip":"\u274c Fecha fin en jira: "+this.state.jira.fields.customfield_12470},"\u274c"):p.a.createElement("span",{"data-tip":"Fecha fin"},"\u2753"),this.state.jira.fields&&this.state.jira.key&&this.state.config.settings.env.prod?this.state.config.settings.env.prod.promoID==this.state.jira.fields.customfield_12382?p.a.createElement("span",{"data-tip":"Promo ID Jira correcta: "+this.state.jira.fields.customfield_12382},"\u2705"):p.a.createElement("span",{"data-tip":"\u274c Promo ID Jira: "+this.state.jira.fields.customfield_12382},"\u274c"):p.a.createElement("span",{"data-tip":"Promo Id"},"\u2753"),this.state.jira.fields&&this.state.jira.key?this.props.promo.bucket==this.state.jira.fields.customfield_12472||"N/A"==this.state.jira.fields.customfield_12472&&!this.props.promo.bucket?p.a.createElement("span",{"data-tip":"Bucket Jira correcto: "+this.state.jira.fields.customfield_12472},"\u2705"):p.a.createElement("span",{"data-tip":"\u274c Bucket Jira: "+this.state.jira.fields.customfield_12472},"\u274c"):p.a.createElement("span",{"data-tip":"Bucket"},"\u2753")),p.a.createElement("td",null,l()(this.props.promo.startDate,"DD/MM/YYYY")<l()()&&l()(this.props.promo.expiryDate,"DD/MM/YYYY")>l()()?p.a.createElement("span",{"data-tip":"Promo live"},"\ud83d\udd25"):l()(this.props.promo.startDate,"DD/MM/YYYY")<l()()&&l()(this.props.promo.expiryDate,"DD/MM/YYYY")<l()()?p.a.createElement("span",{"data-tip":"Promo acabada"},"\ud83d\udc80"):l()(this.props.promo.startDate,"DD/MM/YYYY")>l()()&&l()(this.props.promo.expiryDate,"DD/MM/YYYY")>l()()?p.a.createElement("span",{"data-tip":"Promo futura"},"\ud83d\udd2e"):p.a.createElement("span",{"data-tip":"Algo pasa"},"\u274c")),p.a.createElement("td",null,p.a.createElement("a",{target:"_blank",href:h+"/promotion/"+this.props.promo.path+"?previewDate="+l()(this.props.promo.startDate,"DD/MM/YYYY").format("DD-MM-YYYY")},this.props.promo.title)),p.a.createElement("td",null,this.state.config.settings.env.prod?this.state.config.settings.env.prod.promoID:""),p.a.createElement("td",{className:this.props.promo.startDate==this.state.config.settings.startDate?"green":"red","data-tip":this.props.promo.startDate==this.state.config.settings.startDate?"Fechas promo y schedule coinciden":"Fecha promo: "+l()(this.state.config.settings.startDate,"DD/MM/YYYY").format("DD MMM YY")},l()(this.props.promo.startDate,"DD/MM/YYYY").format("DD MMM YY")),p.a.createElement("td",{className:this.props.promo.expiryDate==this.state.config.settings.expiryDate?"green":"red","data-tip":this.props.promo.expiryDate==this.state.config.settings.expiryDate?"Fechas promo y schedule coinciden":"Fecha promo: "+l()(this.state.config.settings.expiryDate,"DD/MM/YYYY").subtract(1,"days").format("DD MMM YY")},l()(this.props.promo.expiryDate,"DD/MM/YYYY").subtract(1,"days").format("DD MMM YY")),p.a.createElement("td",null,this.props.next?l()(this.props.next.startDate,"DD/MM/YYYY")<l()()&&l()(this.props.next.expiryDate,"DD/MM/YYYY")>l()()?p.a.createElement("span",{"data-tip":"La promo est\xe1 apareciendo en la secci\xf3n pr\xf3ximamente"},"\ud83d\udd25"):l()(this.props.next.startDate,"DD/MM/YYYY")<l()()&&l()(this.props.next.expiryDate,"DD/MM/YYYY")<l()()?p.a.createElement("span",{"data-tip":"La promo apareci\xf3 en su momento en la secci\xf3n pr\xf3ximamente"},"\ud83d\udc80"):l()(this.props.next.startDate,"DD/MM/YYYY")>l()()&&l()(this.props.next.expiryDate,"DD/MM/YYYY")>l()()?p.a.createElement("span",{"data-tip":"La promo aparecer\xe1 en la secci\xf3n pr\xf3ximamente"},"\ud83d\udd2e"):p.a.createElement("span",{"data-tip":"Algo pasa"},"\u274c"):"",this.props.next?l()(this.props.next.startDate,"DD/MM/YYYY").isSame(l()(this.props.promo.startDate,"DD/MM/YYYY").subtract(5,"days"),"date")&&this.props.next.expiryDate==this.props.promo.startDate?p.a.createElement("span",{"data-tip":"Pr\xf3ximamente 5 d\xedas antes: "+this.props.next.startDate+" - "+l()(this.props.next.expiryDate,"DD/MM/YYYY").subtract(1,"days").format("DD MMM YY")},"\u2705"):p.a.createElement("span",{"data-tip":"Pr\xf3ximamente no es 5 d\xedas antes o no desaparece con el inicio de la promo"},"\u274c"):""),p.a.createElement("td",null,this.props.promo.bucket),p.a.createElement("td",null,this.props.promo.partners?this.props.promo.partners.join(","):""),p.a.createElement("td",null,this.props.promo.devices))}}]),o}(p.a.Component),u=function(e){Object(n.a)(o,e);var a=Object(i.a)(o);function o(e){var r;return Object(s.a)(this,o),(r=a.call(this,e)).buscarJiras=function(){var e=new Headers;e.set("Authorization","Basic "+t.from(document.getElementById("username").value+":"+document.getElementById("password").value).toString("base64")),fetch("https://jira.gamesys.co.uk/rest/api/latest/mypermissions",{method:"GET",headers:e}).then((function(t){t.ok?r.setState({username:document.getElementById("username").value,password:document.getElementById("password").value}):alert("Error iniciando sesi\xf3n en Jira")}))},r.state={promos:{},meses:[]},r}return Object(r.a)(o,[{key:"componentDidMount",value:function(){var t=this;fetch(h+"/api/config/promotions/v2/promotions-page.json").then((function(t){return t.json()})).then((function(e){var a=[];e.categories[0].promotions.map((function(t){var e=l()(t.startDate,"DD/MM/YYYY"),s=a.find((function(t){return t.mes==e.format("YYYYMM")}));s?s.promos.push(t):a.push({mes:e.format("YYYYMM"),promos:[t]})})),t.setState({promos:e,meses:a})}))}},{key:"render",value:function(){var t=this;return p.a.createElement("div",{className:"App"},p.a.createElement("div",{className:"App-header"},p.a.createElement("h2",null,"MCE Promotions"),p.a.createElement("div",null,p.a.createElement("input",{placeholder:"Jira username",type:"text",id:"username"}),p.a.createElement("input",{placeholder:"Jira password",type:"password",id:"password"}),p.a.createElement("button",{onClick:this.buscarJiras},"Buscar Jiras")),p.a.createElement("br",null),p.a.createElement("table",null,p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Mes"),p.a.createElement("th",null,"Jira"),p.a.createElement("th",null,"Jira Errors"),p.a.createElement("th",null),p.a.createElement("th",null,"Title"),p.a.createElement("th",null,"ID"),p.a.createElement("th",null,"Schedule Start"),p.a.createElement("th",null,"Schedule End"),p.a.createElement("th",null,"Pr\xf3ximamente"),p.a.createElement("th",null,"Bucket"),p.a.createElement("th",null,"Partner"),p.a.createElement("th",null,"Devices"))),p.a.createElement("tbody",null,this.state.meses.map((function(e,a){return e.promos.map((function(s,r){return p.a.createElement(d,{mes:e,index2:a,index:r,key:r,username:t.state.username,password:t.state.password,promo:s,next:t.state.promos.categories[1].promotions.find((function(t){return t.path==s.path}))})}))}))))))}}]),o}(p.a.Component);e.a=u}).call(this,a(17).Buffer)}},[[11,1,2]]]);
//# sourceMappingURL=main.62f060f5.chunk.js.map